<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<script src="/js/angular.min.js"></script>
<title>请求</title>
</head>

<body>

	<div ng-app="myApp" ng-controller="siteCtrl">

		<ul>
			<li ng-repeat="item in list">{{ item.name }}</li>
			<li><input type="text" id="in" ng-model="pageNow" value="1" />
				/ <span ng-bind="pages"> </span> <input type="button" value="sreach"
				ng-click="search()" /></li>
		</ul>

	</div>

	<script>
		var app = angular.module('myApp', []);
		app.controller('siteCtrl', function($scope, $http) {
			$scope.pageNow = 1;
			$scope.method = 'GET';
			$scope.search = function() {
				$scope.url = 'http://localhost:8080/list_onepage.do?pageNow='
						+ $scope.pageNow + '&pageSize=3';
				$scope.code = null;
				$scope.response = null;

				$http({
					method : $scope.method,
					url : $scope.url
				}).then(function(response) {

					if (response.data.length > 0) {
						$scope.list = response.data;
						return;
					}
					$scope.list = [ {
						"name" : "无数据"
					} ];
					return;

				}, function(response) {
					$scope.data = response.data || 'Request failed';
					$scope.status = response.status;
				});
			}

			$scope.search(1, 3);

			$scope.url = 'http://localhost:8080/list.do?pageSize=3';
			$scope.code = null;
			$scope.response = null;
			$http({
				method : $scope.method,
				url : $scope.url
			}).then(function(response) {
				console.log(response.data);
				$scope.pages = response.data.pages;
				$scope.pageNow = response.data.cur_page;
			}, function(response) {
				$scope.data = response.data || 'Request failed';
				$scope.status = response.status;
			});
		});
	</script>

</body>

</html>